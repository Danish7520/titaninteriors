<!DOCTYPE html>
<html lang="en">

<head>
    <title>Titan Interiors</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/vue"></script>
</head>

<style>
    html {
        overflow-x: hidden;
    }
</style>

<body style="
background-color: #9d9d9d;
">
    <nav class="navbar navbar-inverse ">
        <div class="container-fluid" style="
    padding-right:0px;
    padding-left:0px;
    ">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#MyNavbar">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span> 
            </button>
                <img src="../images/logo.png" style="
            height: 80px;
            width: 300px;
        ">

            </div>
            <div class="collapse navbar-collapse" id="MyNavbar">
                <ul class="nav navbar-nav">
                    <li><a href="/" style="
                font-size: 20px;
                background-color:#222222;
                padding-bottom: 5px;
                top: 40px;
                left: 40px;
            ">Home</a></li>
                    <li class="active"><a href="/estimation" style="
            font-size: 20px;
                background-color:#222222;
                padding-bottom: 5px;
                top: 40px;
                left: 40px;
            ">Estimation</a></li>
                    <li><a href="#" style="
            font-size: 20px;
                padding-bottom: 5px;
                top: 40px;
                left: 40px;
            ">VR</a></li>
                    <li><a href="/contacts" style="
            font-size: 20px;
                padding-bottom: 5px;
                top: 40px;
                left: 40px;
            ">Contacts</a></li>
                    <li><a href="/about" style="
            font-size: 20px;
                padding-bottom: 5px;
                top: 40px;
                left: 40px;
            ">About</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/signup" style="
            font-size: 17px;
          padding-right: 15px;
      "><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                    <li><a href="/login" style="
            font-size: 17px;
          padding-right: 40px;
          padding-left: 0px;
      "><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                </ul>
            </div>
        </div>
    </nav>


    <!-- estimation-area -->
    <div class="row">

        <!-- estimation -->
        <div class="col-md-2">
            <div class="panel panel-default">
                <div class="panel-heading" style="background:#A10029; color:white; font-size:17px; ">
                    <center><b>Get Estimates</b></center>
                </div>
                <div class="panel-body">
                    <div class="estimate">
                        <div class="panel panel-default">
                            <div class="panel-body" style="background:#A10029; color:white; font-size:15px;"><b>Select Type</b></div>
                        </div>

                        <div class="radio-btn" style="font-size:15px; ">
                            <div class="radio">
                                <label><input type="radio" name="optradio" onclick="Wall()" checked><b>Wall</b></label>
                            </div>
                            <div class="radio">
                                <label><input type="radio" name="optradio" onclick="Window()"><b>Window</b></label>
                            </div>
                            <div class="radio">
                                <label><input type="radio" name="optradio" onclick="Floor()"><b>Floor</b></label>
                            </div>
                        </div>
                        <div class="panel panel-default">
                            <div class="panel-body" style="background:#A10029; color:white; font-size:15px;"><b>Dimensions</b></div>
                        </div>
                        <div class="input-group">
                            <input type="number" min="0" class="form-control" placeholder="width" id="width">
                            <br>
                            <br>
                            <input type="number" min="0" class="form-control" placeholder="Height" id="height">
                            <br>
                            <br>
                            <br>
                            <div>
                                <input type="button" class="btn btn-info" onclick="estimation()" value="Enter">
                            </div>
                            <!-- show error message -->
                            <div id="error">

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- script tag -->
        <script>

            var app4;     // variable 
            var productselected = ""; // variable

            // load when window is loaded
            window.onload = function () {
                // ajax request for getting data when window is first time loaded
                $.ajax({
                        tyoe: "GET",
                        url: "/Wall"

                    })
                    .done(function (data) {
                        
                        // create object of Vuejs
                        app4 = new Vue({
                            el: '#app4',
                            data: {
                                data
                            },
                            methods: {
                                selectproduct: function (pess) {
                                    console.log(pess);
                                    productselected = pess
                                }
                            }
                        })
                    })
                    .fail(function () {

                    });
            }

            //call when window load
            function Wall() {
                $('#height').attr('placeholder', 'Height'); // place height in height field
                // ajax request for wall 
                $.ajax({
                        tyoe: "GET",
                        url: "/Wall"

                    })
                    .done(function (data) {
                        console.log("done", data)
                        app4.data = data;

                    })
                    .fail(function () {

                    });
                }
            
            // call when window is selected
            function Window() {
                $('#height').attr('placeholder', 'Height'); // place height in height field
                console.log("ooooo1")
                // ajax request for window
                $.ajax({
                        tyoe: "GET",
                        url: "/Window"

                    })
                    .done(function (data) {
                        console.log("done", data)
                        app4.data = data;


                    })
                    .fail(function () {

                    });
                }
            
            // call when floor is selected
            function Floor() {
                $('#height').attr('placeholder', 'Length'); // jqjuery to place lenth in lenth field when window is selected
                // ajax request to get data of floor when floor is selected
                $.ajax({
                        tyoe: "GET",
                        url: "/Floor"

                    })
                    .done(function (data) {
                        console.log("done", data)
                        app4.data = data;
                    })
                    .fail(function () {

                    });
                }

            // enter function estimation
            function estimation() {
                var width = $('#width').val();    // store width
                var height = $('#height').val();  // store height
                
                // if condition when width is not given
                if (width == "") {
                    document.getElementById('error').innerHTML =
                        `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Width is required</strong>
                  </div>`;
                }

                // if condition when height is not given
                if (height == "") {
                    // if for height
                    if ($('#height')[0].placeholder == "Height") {
                        document.getElementById('error').innerHTML =
                            `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Height is required</strong>
                  </div>`;
                    } 
                    // else for lenth
                    else {
                        document.getElementById('error').innerHTML =
                            `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Length is required</strong>
                  </div>`;
                    }

                }

                // if width is less than 0 show this error
                if (width < 0) {
                    document.getElementById('error').innerHTML =
                        `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Width should be greater than 0</strong>
                  </div>`;
                }

                // if height is less than 0 show this error message
                if (height < 0) {
                    if ($('#height')[0].placeholder == "Height"){
                    document.getElementById('error').innerHTML =
                        `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Height should be greater than 0</strong>
                  </div>`;
                  }
                  else{
                    document.getElementById('error').innerHTML =
                        `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Lenth should be greater than 0*</strong>
                  </div>`;
                }
                }

                // if product is not selected show this error message
                if (productselected == "") {
                    document.getElementById('error').innerHTML =
                        `  <div class="alert alert-danger alert-dismissable fade in">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>*Select a product*</strong>
                  </div>`;
                }
                console.log('selectedproduct', productselected);

            }
        </script>
        <script>
            
        </script>
        <!-- end estimation -->
        <!-- products -->
        <div class="col-md-5">
            <div class="row">
                <div class="panel panel-default">
                    <div class="panel-heading" style="background:#A10029; color:white; font-size:17px; ">
                        <center><b>Select Products</b></center>
                    </div>
                    <div class="panel-body" id="app4">
                        <div class="col-md-6" v-for="Product in data">
                            <div class="panel panel-default">
                                <div class="panel-heading" style="background:#A10029; color:white; ">
                                    <center>
                                        <p style="font-size:15px"><b> {{ Product.name }} </b></p>
                                    </center>
                                </div>
                                <div class="panel-body" v-for="Category in Product.Categories" style="padding-top:5px; padding-bottom:0px; padding-left:20px; padding-right:20px">
                                    <div class="panel-group" id="accordion">
                                        <div class="panel panel-default">
                                            <div class="panel-heading" style="background:#A10029; color:white;  ">
                                                <h4 class="panel-title">

                                                    <!--SEE HREF BELOW -->
                                                    <a data-toggle="collapse" data-parent="#accordion" :href="`#${Category._id}`">
                                                        <p style="font-size:13px">{{ Category.name }}</p>
                                                    </a>
                                                </h4>
                                            </div>

                                            <!-- SEE ID BELOW AS WELL -->
                                            <div v-bind:id="Category._id" class="panel-collapse collapse">
                                                <div class="panel-body">
                                                    <img v-bind:src="Category.image" alt="Lights" style="width:100%">
                                                    <p><b>Price per piece <br>{{ Category.price }} RS</b></p>

                                                    <button type="button" class="btn btn-primary btn-xs" v-on:click="selectproduct(Category)">Select Product</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </di>
                        </div>
                    </div>
                </div>

                <!-- end products -->
                <!-- virtual reality -->
                <div class="col-md-5">
                </div>
                <!-- end virtual reality -->
            </div>
            <!--end estimation-area -->






</body>

</html>